<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/assets/css/stylesheet.css">
</head>
<body>
    <nav>
        <h1>WELCOME TO BIRTHDATES' DUMPROOM</h1>
        <a id="createAnchor" href="http://127.0.0.1:3000/create"><div id="createData">
            <span>ADD</span>
            <svg fill="white" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 414.312 414.312" xml:space="preserve" stroke="white"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M398.932,139.543l-1.133-0.472l-0.944-0.802c-3.316-2.834-7.495-4.268-12.441-4.268H272.546l-0.346-7.432 c-0.69-14.637-1.219-29.28-1.741-43.922c-0.736-20.367-1.493-41.423-2.697-62.075c-0.73-12.355-9.855-18.055-18.158-19.266 l-1.158-0.261C246.12,0.333,244.084,0,242.047,0h-97.71c-10.364,0-15.102,5.949-17.25,10.936l-0.754,1.737l-1.465,1.201 c-4.192,3.443-6.287,8.336-6.23,14.543c0.35,37.719,4.222,75.309,7.967,107.107l0.957,8.097l-37.133,2.724 c-19.999,1.47-39.991,2.943-59.991,4.377c-3.389,0.244-6.416,1.161-9.244,2.793l-0.889,0.515l-0.995,0.264 c-8.765,2.351-15.125,10.494-15.125,19.355v5.583c0,3.031,0.805,6.094,2.397,9.11l0.754,1.427l0.114,1.609 c2.123,27.218,2.303,54.68,2.308,82.771c0,13.441,10.077,17.356,14.414,18.418l0.937,0.289c2.48,0.954,4.951,1.411,7.561,1.411 h102.885l0.17,7.622c0.267,11.827,0.665,23.648,1.066,35.465c0.635,18.591,1.29,37.815,1.384,56.803 c0.066,13.192,9.884,17.219,14.106,18.342l0.919,0.31c2.509,1.01,5.091,1.503,7.889,1.503h94.913c5.474,0,9.973-1.742,13.391-5.18 l1.538-1.523c3.443-3.423,5.189-7.932,5.189-13.416c-0.005-29.178-0.208-63.576-1.676-97.37l-0.355-8.14h113.128 c12.659,0,18.098-9.1,18.981-17.616l0.183-1.777l0.935-1.523c1.889-3.062,2.812-6.454,2.812-10.364V156.904 C410.118,146.396,404.045,141.658,398.932,139.543z M369.885,248.455H253.219c-15.234,0-18.316,12.599-18.905,16.463l-0.3,1.25 c-0.792,2.427-1.097,4.879-0.935,7.5c2.118,34.042,2.569,67.349,2.722,92.561l0.046,7.846h-57.706l-0.208-7.586 c-0.262-9.303-0.584-18.616-0.911-27.919c-0.64-18.332-1.305-37.282-1.404-56c-0.01-1.752-0.249-3.483-0.759-5.454l-0.274-1.076 l0.035-1.112c0.193-6.129-1.825-11.837-5.527-15.665c-3.359-3.474-7.929-5.23-13.591-5.23H49.942l-0.084-7.714 c-0.17-16.849-0.8-33.301-1.866-48.906l-0.536-7.749l36.409-2.671c19.974-1.473,39.941-2.938,59.908-4.373 c1.731-0.127,3.458-0.479,5.423-1.109l1.369-0.437l1.439,0.084c6.251,0.375,11.882-1.612,15.059-5.215 c2.668-3.021,3.687-7.223,3.031-12.484c-5.329-42.754-9.166-78.696-10.555-115.131l-0.312-8.097h69.312l0.319,7.472 c0.473,11.212,0.869,22.427,1.265,33.644c0.772,21.886,1.579,44.521,2.955,66.702c0.087,1.338,0.311,2.704,0.701,4.296 l0.233,1.856c0.036,9.968,5.982,20.035,19.195,20.035h116.676V248.455z"></path> </g> </g> </g></svg>
        </div>
        </a>
    </nav>
    <main>
        <ul id="box">
            <% datas.forEach(data => { %>
            <li class="birthday">
                <span>
                    <div>
                        <b>PERSON:</b> <%= data.person %>
                    </div>
                    <div>
                        <% const date = data.birthdayDate; %>
                        <% const dateOnly = date.toLocaleDateString('en-CA'); %>
                        <b>BIRTHDAY DATE:</b> <%= dateOnly %>
                    </div>
                </span>
                <div id="addons">
                    <a id="anchorBin" data-doc="<%= data._id %>"><svg id="bin" fill="white" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" stroke="white"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M 15.7566 49.5476 L 40.2434 49.5476 C 44.8420 49.5476 46.8962 47.4001 47.5731 42.8248 L 51.0511 19.4118 L 51.5645 19.4118 C 54.4358 19.4118 56 17.6144 56 14.7665 L 56 11.2183 C 56 8.3705 54.4358 6.5731 51.5645 6.5731 L 4.4352 6.5731 C 1.7040 6.5731 0 8.3705 0 11.2183 L 0 14.7665 C 0 17.6144 1.5640 19.4118 4.4352 19.4118 L 4.9721 19.4118 L 8.4268 42.8248 C 9.1271 47.4234 11.1579 49.5476 15.7566 49.5476 Z M 5.3922 15.8870 C 4.2251 15.8870 3.7582 15.3968 3.7582 14.2296 L 3.7582 11.7553 C 3.7582 10.5881 4.2251 10.0979 5.3922 10.0979 L 50.6308 10.0979 C 51.7983 10.0979 52.2419 10.5881 52.2419 11.7553 L 52.2419 14.2296 C 52.2419 15.3968 51.7983 15.8870 50.6308 15.8870 Z M 15.8032 46.0228 C 13.7024 46.0228 12.5118 45.0891 12.1617 42.7782 L 8.6836 19.4118 L 47.3164 19.4118 L 43.8380 42.7782 C 43.5115 45.0891 42.2743 46.0228 40.1967 46.0228 Z M 21.2188 41.1441 C 21.7090 41.1441 22.1292 40.9107 22.4560 40.5839 L 27.9883 35.0516 L 33.5206 40.5839 C 33.8474 40.8874 34.2676 41.1441 34.7811 41.1441 C 35.7615 41.1441 36.5552 40.3038 36.5552 39.3234 C 36.5552 38.7865 36.3451 38.4130 36.0183 38.0629 L 30.5093 32.5539 L 36.0416 26.9749 C 36.3918 26.6014 36.5785 26.2513 36.5785 25.7611 C 36.5785 24.7573 35.7849 23.9637 34.7811 23.9637 C 34.3376 23.9637 33.9408 24.1504 33.5673 24.5239 L 27.9883 30.0562 L 22.4326 24.5472 C 22.0825 24.1971 21.7090 24.0104 21.2188 24.0104 C 20.2384 24.0104 19.4214 24.7807 19.4214 25.7611 C 19.4214 26.2746 19.6315 26.6715 19.9583 26.9983 L 25.4673 32.5539 L 19.9583 38.0862 C 19.6315 38.4130 19.4214 38.8098 19.4214 39.3234 C 19.4214 40.3038 20.2150 41.1441 21.2188 41.1441 Z"></path></g></svg></a>
                    <a id="anchorEdit" href="http://127.0.0.1:3000/<%= data._id %>"><svg fill="white" height="20px" width="20px" version="1.1" id="edit" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 348.882 348.882" xml:space="preserve" stroke="white"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M333.988,11.758l-0.42-0.383C325.538,4.04,315.129,0,304.258,0c-12.187,0-23.888,5.159-32.104,14.153L116.803,184.231 c-1.416,1.55-2.49,3.379-3.154,5.37l-18.267,54.762c-2.112,6.331-1.052,13.333,2.835,18.729c3.918,5.438,10.23,8.685,16.886,8.685 c0,0,0.001,0,0.001,0c2.879,0,5.693-0.592,8.362-1.76l52.89-23.138c1.923-0.841,3.648-2.076,5.063-3.626L336.771,73.176 C352.937,55.479,351.69,27.929,333.988,11.758z M130.381,234.247l10.719-32.134l0.904-0.99l20.316,18.556l-0.904,0.99 L130.381,234.247z M314.621,52.943L182.553,197.53l-20.316-18.556L294.305,34.386c2.583-2.828,6.118-4.386,9.954-4.386 c3.365,0,6.588,1.252,9.082,3.53l0.419,0.383C319.244,38.922,319.63,47.459,314.621,52.943z"></path> <path d="M303.85,138.388c-8.284,0-15,6.716-15,15v127.347c0,21.034-17.113,38.147-38.147,38.147H68.904 c-21.035,0-38.147-17.113-38.147-38.147V100.413c0-21.034,17.113-38.147,38.147-38.147h131.587c8.284,0,15-6.716,15-15 s-6.716-15-15-15H68.904c-37.577,0-68.147,30.571-68.147,68.147v180.321c0,37.576,30.571,68.147,68.147,68.147h181.798 c37.576,0,68.147-30.571,68.147-68.147V153.388C318.85,145.104,312.134,138.388,303.85,138.388z"></path> </g> </g></svg></a>
                </div>
            </li>
        <% }); %>
        </ul>
    </main>
    <script>
        const trashcan = document.querySelector("#anchorBin");

        trashcan.addEventListener("click", e => {
            const endpoint = `/home/${trashcan.dataset.doc}`;

            fetch(endpoint, {
                method: "DELETE"
            })
            .then((response) => response.json())
            .then(data => window.location.href = data.redirect)
            .catch(err => console.log(err));
        });
    </script>
</body>
</html>